{"version":3,"sources":["things/chat/Chat/Message.module.css","things/chat/Chat/Chat.module.css","things/chat/NewMessageForm/NewMessageForm.module.css","things/chat/ChatPage.module.css","things/chat/Chat/Message.tsx","things/chat/Chat/Chat.tsx","things/chat/NewMessageForm/NewMessageForm.tsx","things/chat/ChatPage.tsx"],"names":["module","exports","Message","userMessage","photo","userName","message","className","css","main","leftDiv","src","alt","rightDiv","Chat","scrollingRef","useRef","messages","useSelector","state","chat","useEffect","current","scrollIntoView","behavior","showMessages","map","el","ind","ref","NewMessageForm","dispatch","useDispatch","isConnection","console","log","buttonRef","buttonHandle","e","key","click","initialValues","newMessage","onSubmit","values","setSubmitting","ChatRedThunks","sendMessage","String","isSubmitting","component","name","class","textForm","onKeyUp","type","htmlType","disabled","buttonForm","ChatPage","startMessagesListening","stopMessagesListening"],"mappings":"uFACAA,EAAOC,QAAU,CAAC,KAAO,sBAAsB,QAAU,yBAAyB,SAAW,4B,oBCA7FD,EAAOC,QAAU,CAAC,KAAO,qB,oBCAzBD,EAAOC,QAAU,CAAC,KAAO,6BAA6B,SAAW,iCAAiC,WAAa,qC,oBCA/GD,EAAOC,QAAU,CAAC,KAAO,yB,6FCGZC,EAAiD,SAAC,GAAqB,IAAnBC,EAAkB,EAAlBA,YAErDC,EAA6BD,EAA7BC,MAAOC,EAAsBF,EAAtBE,SAAUC,EAAYH,EAAZG,QAEzB,OAAO,0BAASC,UAAWC,IAAIC,KAAxB,UACH,qBAAKF,UAAWC,IAAIE,QAApB,SACI,qBAAKC,IAAKP,GAAgB,kCAAmCQ,IAAI,aAErE,sBAAKL,UAAWC,IAAIK,SAApB,UACI,gCAAQR,IACR,4BAAIC,W,kBCRHQ,EAAW,WAEpB,IAAMC,EAAeC,iBAAuB,MACtCC,EAAWC,aAAY,SAACC,GAAD,OAAyBA,EAAMC,KAAKH,YAEjEI,qBAAU,WAAO,IAAD,EACZ,UAAAN,EAAaO,eAAb,SAAsBC,eAAe,CAAEC,SAAU,aAClD,CAACP,IAGJ,IAAMQ,EAAeR,EAASS,KAAI,SAACC,EAASC,GAAV,OAA0B,cAAC,EAAD,CAAmBzB,YAAawB,GAAlBC,MAE1E,OAAO,mCACH,sBAAKrB,UAAWC,IAAIC,KAApB,UACKgB,EACD,qBAAKI,IAAKd,U,oCCbTe,EAAqB,WAE9B,IAAMC,EAAWC,cACXC,EAAef,aAAY,SAACC,GAAD,OAAyBA,EAAMC,KAAKa,gBACrEC,QAAQC,IAAIF,GAEZZ,qBAAU,cACP,CAACY,IAEJ,IAAMG,EAAYpB,iBAA0B,MAEtCqB,EAAe,SAACC,GACM,IAAD,EAAT,UAAVA,EAAEC,MACF,UAAAH,EAAUd,eAAV,SAAmBkB,UAI3B,OAAO,cAAC,IAAD,CACHC,cAAe,CAAEC,WAAY,IAC7BC,SAAU,SAACC,EAAD,GAAgC,IAArBC,EAAoB,EAApBA,cACjBA,GAAc,GACdd,EAASe,IAAcC,YAAYC,OAAOJ,EAAOF,cACjDE,EAAOF,WAAa,GACpBG,GAAc,IANf,SAQF,YAAuB,IAApBI,EAAmB,EAAnBA,aACA,OAAO,eAAC,IAAD,CAAM1C,UAAWC,IAAIC,KAArB,UACH,cAAC,IAAD,CAAOyC,UAAU,WAAWC,KAAK,aAAaC,MAAO5C,IAAI6C,SAAUC,QAASjB,IAC5E,cAAC,IAAD,CAAQkB,KAAK,UACTC,SAAS,SACTC,UAAWxB,GAAgBgB,EAC3B1C,UAAWC,IAAIkD,WACf7B,IAAKO,EAJT,mBAKEH,GAAgB,4D,kBCfnB0B,UAnBM,WAEjBzB,QAAQC,IAAI,oBAEZ,IAAMJ,EAAWC,cASjB,OAPAX,qBAAU,WAEN,OADAU,EAASe,IAAcc,0BAChB,WACH7B,EAASe,IAAce,4BAE5B,IAEI,0BAAStD,UAAWC,IAAIC,KAAxB,UACH,cAAC,EAAD,IACA,cAAC,EAAD","file":"static/js/6.4bf5ccc9.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"main\":\"Message_main__3GCdo\",\"leftDiv\":\"Message_leftDiv__1CayJ\",\"rightDiv\":\"Message_rightDiv__1ppsR\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"main\":\"Chat_main__SH-Kv\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"main\":\"NewMessageForm_main__36m2S\",\"textForm\":\"NewMessageForm_textForm__2FNOF\",\"buttonForm\":\"NewMessageForm_buttonForm__EVhH1\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"main\":\"ChatPage_main__13trq\"};","import { FC } from \"react\";\r\nimport { ChatMessageType } from \"../../../types/types\";\r\nimport css from './Message.module.css'\r\n\r\nexport const Message: FC<{ userMessage: ChatMessageType; }> = ({ userMessage }) => {\r\n\r\n    const { photo, userName, message } = userMessage;\r\n\r\n    return <section className={css.main}>\r\n        <div className={css.leftDiv}>\r\n            <img src={photo ? photo : 'https://via.placeholder.com/100'} alt='avatar' />\r\n        </div>\r\n        <div className={css.rightDiv}>\r\n            <label>{userName}</label>\r\n            <p>{message}</p>    \r\n        </div>\r\n    </section>;\r\n};\r\n","import { FC, useEffect, useRef } from \"react\";\r\nimport { useSelector } from \"react-redux\";\r\nimport { AppStateType } from \"../../../redux/redux-state\";\r\nimport { Message } from \"./Message\";\r\nimport css from './Chat.module.css'\r\n\r\nexport const Chat: FC = () => {\r\n\r\n    const scrollingRef = useRef<HTMLDivElement>(null);\r\n    const messages = useSelector((state: AppStateType) => state.chat.messages);\r\n\r\n    useEffect(() => {\r\n        scrollingRef.current?.scrollIntoView({ behavior: 'smooth' });\r\n    }, [messages]);\r\n\r\n\r\n    const showMessages = messages.map((el: any, ind: number) => <Message key={ind} userMessage={el} />);\r\n\r\n    return <>\r\n        <div className={css.main} >\r\n            {showMessages}\r\n            <div ref={scrollingRef}></div>\r\n        </div>\r\n    </>;\r\n};\r\n","import { Button } from \"antd\";\r\nimport { Field, Form, Formik } from \"formik\";\r\nimport { FC, KeyboardEvent, MouseEvent, useEffect, useRef } from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { ChatRedThunks } from \"../../../redux/chatReducer\";\r\nimport { AppStateType } from \"../../../redux/redux-state\";\r\nimport css from './NewMessageForm.module.css'\r\n\r\nexport const NewMessageForm: FC = () => {\r\n\r\n    const dispatch = useDispatch();\r\n    const isConnection = useSelector((state: AppStateType) => state.chat.isConnection);\r\n    console.log(isConnection);\r\n\r\n    useEffect(() => {\r\n    }, [isConnection]);\r\n\r\n    const buttonRef = useRef<HTMLButtonElement>(null)\r\n\r\n    const buttonHandle = (e: KeyboardEvent<HTMLTextAreaElement>) => {\r\n        if (e.key === 'Enter') {\r\n            buttonRef.current?.click()\r\n        }\r\n    }\r\n\r\n    return <Formik\r\n        initialValues={{ newMessage: '' }}\r\n        onSubmit={(values, { setSubmitting }) => {\r\n            setSubmitting(true);\r\n            dispatch(ChatRedThunks.sendMessage(String(values.newMessage)));\r\n            values.newMessage = '';\r\n            setSubmitting(false);\r\n        }}>\r\n        {({ isSubmitting }) => {\r\n            return <Form className={css.main} >\r\n                <Field component=\"textarea\" name=\"newMessage\" class={css.textForm} onKeyUp={buttonHandle}/>\r\n                <Button type='primary'\r\n                    htmlType='submit'\r\n                    disabled={!isConnection || isSubmitting}\r\n                    className={css.buttonForm}\r\n                    ref={buttonRef}>Send</Button>\r\n                {!isConnection && <div>Connection lost...</div>}\r\n            </Form>;\r\n        }}\r\n    </Formik>;\r\n};\r\n","import { FC, useEffect } from \"react\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport { ChatRedThunks } from \"../../redux/chatReducer\";\r\nimport { Chat } from \"./Chat/Chat\";\r\nimport { NewMessageForm } from \"./NewMessageForm/NewMessageForm\";\r\nimport css from './ChatPage.module.css'\r\n\r\nconst ChatPage: FC = () => {\r\n\r\n    console.log('>>>>>>> ChatPage')\r\n\r\n    const dispatch = useDispatch()\r\n\r\n    useEffect(() => {\r\n        dispatch(ChatRedThunks.startMessagesListening())\r\n        return () => {\r\n            dispatch(ChatRedThunks.stopMessagesListening())\r\n        }\r\n    }, [])\r\n\r\n    return <section className={css.main} >\r\n        <Chat />\r\n        <NewMessageForm />\r\n    </section>\r\n}\r\n\r\nexport default ChatPage"],"sourceRoot":""}